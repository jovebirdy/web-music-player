<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://tiles.apache.org/tags-tiles" prefix="tiles" %>  
<%@ taglib uri="http://www.springframework.org/tags" prefix="s" %> 
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="sf" %>
<%@ page isELIgnored="false" %> 
<%@ page isELIgnored="false" %> 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en" class="app">
<head>
<meta charset="utf-8" />
<title>后台管理 | 管理用户</title>
<meta name="description" content="app, web app, responsive, admin dashboard, admin, flat, flat ui, ui kit, off screen nav" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<link rel="stylesheet" href="<%=request.getContextPath()%>/css/app.v2.css" type="text/css" />
<link rel="stylesheet" href="<%=request.getContextPath()%>/css/bootstrap_calendar.css" type="text/css" cache="false" />
<link rel="stylesheet" href="<%=request.getContextPath()%>/css/fuelux/fuelux.css" type="text/css" cache="false">
<!--[if lt IE 9]> <script src="js/ie/html5shiv.js" cache="false"></script> <script src="js/ie/respond.min.js" cache="false"></script> <script src="js/ie/excanvas.js" cache="false"></script> <![endif]-->
</head>
<body>
<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" style="width:810px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">修改用户</h4>
            </div>
            <% String action = request.getContextPath() + "/home/updateUser";%>
            <sf:form data-validate="parsley" style="width:800px" method="post" modelAttribute="user" action="<%=action %>" enctype="multipart/form-data">
                  <div class="modal-body">
                  <input type="hidden" value="${user.id }" name="id"/>
                  <section class="panel panel-default" style="margin:0px;">
                    <div class="panel-body">
                      <p class="text-muted">请填充用户相关信息</p>
                      <div class="form-group">
                        <label>用户名</label>
                        <sf:input style="width:400px" type="text" class="form-control" data-required="true" path="username"></sf:input>
                      </div>
                      
                      <div class="form-group">
                         <label>头像</label><br/>
                         <input  name="imageInfo" style="width:400px" type="file" class="filestyle  parsley-validated" data-icon="false" data-classButton="btn btn-default" data-classInput="form-control inline input-s">
                      </div>
               
                     <div class="form-group" style="width:500px;">
                        <label>邮箱</label>
                        <sf:input style="width:400px" type="text" class="form-control" data-required="true" path="email"></sf:input>
                      </div>
                      
                      <div class="form-group" style="width:500px;">
                        <label>年龄</label>
                       
                        <sf:select class="form-control" style="width:100px" data-required="true" path="age">
                        	<c:forEach begin="1" end="100" varStatus="a">
                        		<sf:option value="${a.count }">${a.count}</sf:option>
                        	</c:forEach>
                        </sf:select>
                      </div>
                      
                      <div class="form-group" style="width:500px;">
                        <label>电话号码</label>
                        <sf:input style="width:400px" type="text" class="form-control" data-required="true" path="tel"></sf:input>
                      </div>
                    </div>
                    </section>
                    </div>
		            <div class="modal-footer">
		            	<span style="color:red"><c:out value='${message}'></c:out></span>
		                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
		                <button  type="submit" class="btn btn-primary">提交更改</button>
		            </div>
            </sf:form>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<!-- 模态框2（Modal） -->
<div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                
                <h4 class="modal-title" id="myModalLabel" style="color:red;"><i class="fa fa-exclamation"></i>&nbsp;警告</h4>
            </div>
            <div class="modal-body" style="font-size:15px;">
            	是否确定删除?
            </div>
            <div class="modal-footer">
                <button onclick="delete_ok()"  type="button" class="btn btn-warning" data-dismiss="modal">删除</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">取消</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>
<section class="vbox">
  <header class="bg-dark dk header navbar navbar-fixed-top-xs">
    <div class="navbar-header aside-md"> <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen" data-target="#nav"> <i class="fa fa-bars"></i> </a> <a href="#" class="navbar-brand" data-toggle="fullscreen"><img src="<%=request.getContextPath()%>/img/front/home/logo.png" class="m-r-sm" style="height:100px !important;" >后台管理系统</a> <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".nav-user"> <i class="fa fa-cog"></i> </a> </div>
    
    <ul class="nav navbar-nav navbar-right hidden-xs nav-user">
      
      <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <span class="thumb-sm avatar pull-left"> <img src="<%=request.getContextPath()%>/img/common/user_default_icon.jpg"> </span> ${admin.adminname} <b class="caret"></b> </a>
        <ul class="dropdown-menu animated fadeInRight">
          <span class="arrow top"></span>
          <li> <a href="docs.html">帮助</a> </li>
          <li> <a href="<%=request.getContextPath()%>/admin/doLogOut/" >注销</a> </li>
        </ul>
      </li>
    </ul>
  </header>
  <section>
    <section class="hbox stretch"> <!-- .aside -->
      <aside class="bg-dark lter aside-md hidden-print" id="nav">
        <section class="vbox">
          
          <section class="w-f scrollable">
            <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0" data-size="5px" data-color="#333333"> <!-- nav -->
              <nav class="nav-primary hidden-xs">
                <ul class="nav">
                  <li> <a href="<%=request.getContextPath()%>/admin/index/"> <i class="fa fa-bullhorn icon"> <b class="bg-danger"></b> </i> <span>通知</span> </a> </li>
                  <li > <a href="#layout" > <i class="fa fa-music icon"> <b class="bg-warning"></b> </i> <span class="pull-right"> <i class="fa fa-angle-down text"></i> <i class="fa fa-angle-up text-active"></i> </span> <span>音乐管理</span> </a>
                    <ul class="nav lt" >
                      <li > <a href="<%=request.getContextPath()%>/admin/addMusic" > <i class="fa fa-angle-right"></i> <span>添加音乐</span> </a> </li>
                      <li > <a href="<%=request.getContextPath()%>/admin/manageMusic/" > <i class="fa fa-angle-right"></i> <span>管理音乐</span> </a> </li>
                    </ul>
                  </li>
                  <li > <a href="#uikit" > <i class="fa fa-group icon"> <b class="bg-success"></b> </i> <span class="pull-right"> <i class="fa fa-angle-down text"></i> <i class="fa fa-angle-up text-active"></i> </span> <span>歌手管理</span> </a>
                    <ul class="nav lt">
                      <li > <a href="<%=request.getContextPath()%>/admin/addSinger" > <i class="fa fa-angle-right"></i> <span>添加歌手</span> </a> </li>
                      <li > <a href="<%=request.getContextPath()%>/admin/manageSinger" >  <i class="fa fa-angle-right"></i> <span>管理歌手</span> </a> </li>
                    </ul>
                  </li>
                  <li class="active"> <a href="#pages" class="active"> <i class="fa fa-user icon"> <b class="bg-primary"></b> </i> <span class="pull-right"> <i class="fa fa-angle-down text"></i> <i class="fa fa-angle-up text-active"></i> </span> <span>用户管理</span> </a>
                    <ul class="nav lt" style="display:block;">
                      <li class="active" > <a href="<%=request.getContextPath()%>/admin/manageUser" class="active"> <i class="fa fa-angle-right"></i> <span>管理用户</span> </a> </li>
                      
                    </ul>
                  </li>
                  <li > <a href="#pages" > <i class="fa fa-users icon"> <b class="bg-primary"></b> </i> <span class="pull-right"> <i class="fa fa-angle-down text"></i> <i class="fa fa-angle-up text-active"></i> </span> <span>管理员管理</span> </a>
                    <ul class="nav lt">
                      <li > <a href="<%=request.getContextPath()%>/admin/addAdmin" > <i class="fa fa-angle-right"></i> <span>新建管理员</span> </a> </li>
                      <li > <a href="<%=request.getContextPath()%>/admin/manageAdmin" > <i class="fa fa-angle-right"></i> <span>管理管理员</span> </a> </li>
                    </ul>
                  </li>
                  
                </ul>
              </nav>
              <!-- / nav --> </div>
          </section>
          <footer class="footer lt hidden-xs b-t b-dark">
            <a href="#nav" data-toggle="class:nav-xs" class="pull-right btn btn-sm btn-dark btn-icon"> <i class="fa fa-angle-left text"></i> <i class="fa fa-angle-right text-active"></i> </a>
          </footer>
        </section>
      </aside>
      <!-- /.aside -->
      <section id="content">
        <section class="vbox">
          <section class="scrollable padder">
            <ul class="breadcrumb no-border no-radius b-b b-light pull-in">
              <li><a href="<%=request.getContextPath()%>/admin/index/"><i class="fa fa-home"></i> 主页</a></li>
              <li class="active"> 用户管理</li>
              <li>管理用户</li>
            </ul>
          
          <section class="panel panel-default">
              <header class="panel-heading"> 用户列表(<c:out value="${counts}"></c:out>) </header>
              <div class="row text-sm wrapper">
                <div class="col-sm-5 m-b-xs">

                  
                </div>
                <div class="col-sm-4 m-b-xs">
                  
                </div>
                <div class="col-sm-3">
                	<% String action1 = request.getContextPath() + "/admin/searchUser/";%>
                  	<form data-validate="parsley" method="post" action="<%=action1 %>">
	                  <div class="input-group">
	                    <input name="username" class="input-sm form-control" placeholder="输入用户名" type="text">
	                    <span class="input-group-btn">
	                    <button type="submit" class="btn btn-sm btn-default" type="button">搜索</button>
	                    </span> </div>
	                </form>
                </div>
              </div>
              <div>
              	<input type="hidden" value="${pageSize }" id="pageSize"/>
              	<input type="hidden" value="${counts }" id="counts"/>
              	<input type="hidden" value="${username}" id="username"/>
              	<input type="hidden" value="<%=request.getContextPath()%>" id="contextPath"/>
              </div>
              <div class="table-responsive text-center" id="result">
                
              </div>
              <footer class="panel-footer">
                <div class="row">
                  <div class="col-sm-4 hidden-xs">
                    
                  </div>
                  <div class="col-sm-4 text-center">  </div>
                  <div class="col-sm-4 text-right text-center-xs">
					
                    <ul class="pagination pagination-sm m-t-none m-b-none" id="pagination">
                      <!--  <li><a href="#"><i class="fa fa-chevron-left"></i></a></li>
                      <li><a href="#">1</a></li>
                      <li><a href="#">2</a></li>
                      <li><a href="#">3</a></li>
                      <li><a href="#">4</a></li>
                      <li><a href="#">5</a></li>
                      <li><a href="#"><i class="fa fa-chevron-right"></i></a></li>-->
                    </ul>
                  </div>
                </div>
              </footer>
            </section>
          	</section>
        </section>
        <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen" data-target="#nav"></a> </section>
      <aside class="bg-light lter b-l aside-md hide" id="notes">
        <div class="wrapper">Notification</div>
      </aside>
    </section>
  </section>
</section>
<script src="<%=request.getContextPath()%>/js/back/app.v2.js"></script> <!-- Bootstrap --> <!-- App -->
<script src="<%=request.getContextPath()%>/js/charts/easypiechart/jquery.easy-pie-chart.js" cache="false"></script> 
<script src="<%=request.getContextPath()%>/js/charts/sparkline/jquery.sparkline.min.js" cache="false"></script> 
<script src="<%=request.getContextPath()%>/js/charts/flot/jquery.flot.min.js" cache="false"></script> 
<script src="<%=request.getContextPath()%>/js/charts/flot/jquery.flot.tooltip.min.js" cache="false"></script> 
<script src="<%=request.getContextPath()%>/js/charts/flot/jquery.flot.resize.js" cache="false"></script>
<script src="<%=request.getContextPath()%>/js/charts/flot/jquery.flot.grow.js" cache="false"></script> 
<script src="<%=request.getContextPath()%>/js/charts/flot/demo.js" cache="false"></script> 
<script src="<%=request.getContextPath()%>/js/common/bootstrap_calendar.js" cache="false"></script>
<script src="<%=request.getContextPath()%>/js/common/demo.js" cache="false"></script>
<script src="<%=request.getContextPath()%>/js/common/jquery.sortable.js" cache="false"></script>  
<script src="<%=request.getContextPath()%>/js/file-input/bootstrap-filestyle.min.js" cache="false"></script>
<script src="<%=request.getContextPath()%>/js/select2/select2.min.js" cache="false"></script>
<script src="<%=request.getContextPath()%>/js/parsley/parsley.min.js" cache="false"></script>
<script src="<%=request.getContextPath()%>/js/parsley/parsley.extend.js" cache="false"></script>
<script type="text/javascript" src="<%=request.getContextPath()%>/js/common/jqPaginator.js"></script>
<script>     
	document.getElementById('time').innerHTML=new Date().toLocaleFormat();     
	setInterval("document.getElementById('time').innerHTML=new Date().toLocaleFormat();",1000);  
</script>    
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <script>
	/*  
	js由毫秒数得到年月日 
	*/
	var id1;
	var format = function(time, format){
		var t = new Date(time);
		var tf = function(i){return (i < 10 ? '0' : '') + i};
		return format.replace(/yyyy|MM|dd|HH|mm|ss/g, function(a){
	    	switch(a){
		    	case 'yyyy': return tf(t.getFullYear());break;
		    	case 'MM': return tf(t.getMonth() + 1);break;
		    	case 'mm': return tf(t.getMinutes());break;
		    	case 'dd': return tf(t.getDate());break;
		    	case 'HH': return tf(t.getHours());break;
		    	case 'ss': return tf(t.getSeconds());break;
	       };
		});
	};
	function delete_user(id) {
		id1= id;
	}
	
	function delete_ok() {
		window.location.href = "http://localhost:8080/hwm/home/deleteUser?id=" + id1;
	}
	
	function updateUser_get(id) { 
		window.location.href = "http://localhost:8080/hwm/home/getUser?id=" + id; 
	}
	
	function updateUser() {
		window.location.href = "http://localhost:8080/hwm/home/updateUser"; 
	}
	
	if("${user.username}" != "" || "${message}" != "") {
		$('#myModal1').modal('show');
	}
	//记录总页面和每页数
	var ps = Number(document.getElementById("pageSize").value);
	var tc = Number(document.getElementById("counts").value);
	if(tc == 0) {
		$('#result').html("<span style='color:gray;font-size:20px;'>没有用户信息</span>");
	}
	//分页
	$('.pagination').jqPaginator({
		totalCounts: tc,
		pageSize: ps,
		visiblePages: 5,
		currentPage: 1,
		first: '<li class="first"><a href="javascript:;">首页</a></li>',
		last: '<li class="last"><a href="javascript:;">尾页</a></li>',
		prev: '<li class="prev"><a href="javascript:;">上一页</a></li>',
		next: '<li class="next"><a href="javascript:;">下一页</a></li>',
		page: '<li class="page"><a href="javascript:;">{{page}}</a></li>',
		onPageChange: function (num, type) {
			if($("#orderpages_hidden").val()!= 0 ){
				getPage(num);
			}
			
			//$('#p3').html('当前第' + num + '页');
		}
	});
	//alert(document.getElementById("musicname").value);
	//alert("${musicname}");
	//获取每页的数据
	function getPage(page,k){
		var ps = Number(document.getElementById("pageSize").value);
		var tc = Number(document.getElementById("counts").value);
		var un = "${username == null? '':username}";
		//alert(tc);
		//alert(sn);
		$.ajax({  
	        type : "POST",  
	        url : $('#contextPath').val() + "/home/ajax_operation" ,  
	        dataType:"json",
	        cache : false,  
	        data : {  
	            pageIndex: page,
	            pageSize: ps,
	            totalPage:tc,
	            userName:un
	        },  
	        async : false,  
	        error : function() {  
	            alert("网络异常！");  
	        },  
	        success : function(data) { 
	        	var html = "";
	        	html += '<table class="table table-striped b-t b-light text-sm"><thead><tr ><th class="text-center">编号  </th><th class="text-center">姓名</th><th class="text-center">头像</th><th class="text-center">邮箱</th><th class="text-center">电话号码</th><th class="text-center">年龄</th><th class="text-center">等级</th><th class="text-center">最近一次登录时间</th><th class="text-center">最近一次登录IP</th><th class="text-center">播放次数</th><th class="text-center" width="15%">操作</th></tr></thead><tbody>';
	    		for(var i=0;i<data.length;i++){	
	    			html += '	<tr>';
	    			html += '          <td>' + data[i].id + '</td>';
	    			html += '         <td>' + data[i].username + '</td>';
	    			html += ' <td>' + data[i].img + '</td>';
	    			html += ' <td>' + data[i].email + '</td>';
	    			html += ' <td>' + data[i].tel + '</td>';
	    			html += ' <td>' + data[i].age + '</td>';
	    			html += ' <td>' + data[i].level + '</td>';
	    			html += '        <td>' + format(data[i].lastLoginTime, 'yyyy年MM月dd日 HH时mm分ss秒') + '</td>';
	    			html += '        <td>' + data[i].lastLoginIp + '</td>';
	    			html += '      <td>' + data[i].playcount + '</td>';
		            html += '  <td>';
		            html += '	<a href="javascript:void(0)" onclick="updateUser_get(' + data[i].id + ')" class="active" ><i style="font-size:15px;" class="fa fa-edit"></i>编辑</a>';
		            html += '  	&nbsp;&nbsp;&nbsp;';
		            html += '  	<a href="javascript:void(0)" onclick="delete_user(' + data[i].id + ')" class="active" data-toggle="modal" data-target="#myModal2"><i style="font-size:15px;" class="fa fa-times"></i>删除</a>';
		            html += '   </td>';
		            html += '  </tr>';
		                    									  
	    		}
	    		html += ' </tbody>';
				html += '</table>';
	    		$('#result').html(html);
	        }  
	    });  
	};
	
    
    //alert(format(1396178344662, 'yyyy-MM-dd HH:mm:ss')); 
	
	
</script>
</body>
</html>